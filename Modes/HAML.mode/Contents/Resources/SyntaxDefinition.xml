<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE syntax SYSTEM "syntax.dtd">
<syntax>
    <head>
        <name>HAML</name>

        <autocompleteoptions use-spelling-dictionary="no" />

        <charsintokens>
            <![CDATA[_0987654321abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ#@%.]]>
        </charsintokens>
<!--<charsincompletion><![CDATA[_0987654321abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ@$</=>!]]></charsincompletion>-->
    </head>

    <states>
        <default id="Base" color="#000" inverted-color="#fff">
            <state id="HAML Comments which coda sucks at highlighting" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>(?:-#|/).*$</regex></begin>
                <end><regex>[\n\r]</regex></end>
            </state>
            <!--<state id="HAML Comment Zero Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^(?:-#|/).*$</regex></begin>
                <end><regex>^[\S]</regex></end>
            </state>
            <state id="HAML Comment Two Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{2}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,2}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Four Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{4}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,4}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Six Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^(?&lt;=[\n\r][\ ]{6})(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,6})(?=[\S])</regex></end>
            </state>
            <state id="HAML Comment Eight Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{8}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,8}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Ten Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{10}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,10}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Twelve Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{12}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,12}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Fourteen Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{14}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,14}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Sixteen Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{16}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,16}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Eighteen Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{18}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,18}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Twenty Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{20}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,20}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Twenty-Two Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{22}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,22}(?=[\S]))</regex></end>
            </state>
            <state id="HAML Comment Twenty-Four Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{24}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,24}(?=[\S]))</regex></end>
            </state>-->
            <!--<state id="HAML Comment Two Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{2}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,2}[\S])</regex></end>
            </state>
            
            <state id="HAML Comment Four Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{4}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,4}[\S])</regex></end>
            </state>

            <state id="HAML Comment Six Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{6}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,6}[\S])</regex></end>
            </state>
            
            <state id="HAML Comment Eight Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{8}(?:-#|/).*$</regex></begin>
                <end><regex>^([\S]|[\ ]{0,8}(?=[\S]))</regex></end>
            </state>
            
            <keywords id="HAML Comment Eight Space" color="#236E25" font-style="italic">
            	<regex>(?m)(^[\ ]{8}(?:-#|/)(?:[^\n\r]*(?:[^\n\r]*(?![\n\r][\ ]{0,8}[\S]))*))</regex>
            </keywords>
            
            <state id="HAML Comment Ten Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{10}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,10}[\S])</regex></end>
            </state>
            
            <state id="HAML Comment Twelve Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{12}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,12}[\S])</regex></end>
            </state>
            
            <state id="HAML Comment Fourteen Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{14}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,14}[\S])</regex></end>
            </state>
            
            <state id="HAML Comment Sixteen Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{16}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,16}[\S])</regex></end>
            </state>
            
            <state id="HAML Comment Eighteen Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{18}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,18}[\S])</regex></end>
            </state>
            
            <state id="HAML Comment Twenty Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{20}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,20}[\S])</regex></end>
            </state>
            
            <state id="HAML Comment Twenty Two Space" color="#236E25" font-style="italic" useforautocomplete="yes" type="comment">
                <begin><regex>^[\ ]{22}(?:-#|/)(?=.*$)</regex></begin>
                <end><regex>[\r\n](?=[\ ]{0,22}[\S])</regex></end>
            </state>-->


            <!-- Red #FE1A1A -->
            <state id="HTML Element" color="#881280" inverted-color="#fac586"  font-style="normal" font-weight="normal" useforautocomplete="no">  <!-- color="#d6771c" -->
              <begin><regex>^\s*[%\.#](?=[\w_-])</regex></begin>
              <end><regex>.(?=[&amp;={\[\s\r\n!])</regex></end>
            </state>

            <state id="interpolated ruby" type="string" color="#760f15" inverted-color="#f48700"  font-style="italic" font-weight="normal" usespellchecking="yes">
                <begin><regex>(?&lt;===)(?:.)</regex></begin>
                <end><regex>[\r\n]</regex></end>
                <import mode="Ruby" state="String with double quotes"/>
            </state>
            
            <state id="Inline Ruby" color="#000" usesymbolsfrommode="Ruby" useautocompletefrommode="Ruby">
                <begin><regex>(?:[&amp;!]?(?&lt;!=)=|-(?!#))(?=[\s\w@])</regex></begin>
                <end><regex>[\n\r]</regex></end>

                <import mode="Ruby" />
            </state>

            <state id="Inline Javascript" color="#000" usesymbolsfrommode="Javascript" useautocompletefrommode="Javascript">
                <begin><regex>(?:^(?:\s{2}):javascript)</regex></begin>
                <end><regex>(?:^(?:\s{4})\}\);)</regex></end>

                <import mode="Javascript" />
            </state>

            <state id="Inline CSS" color="#000" usesymbolsfrommode="CSS" useautocompletefrommode="CSS">
                <begin><regex>^[\ ]{2}\:css</regex></begin>
                <end><regex>(?:.|[\r\n])(?=(?:^[\-\=])|(?:^\s{2}\:))</regex></end>

                <import mode="CSS" />
            </state>

            <state id="Ruby Hash Attribute" color="#000" usesymbolsfrommode="Ruby" useautocompletefrommode="Ruby">
                <begin><regex>{</regex></begin>
                <end><regex>[}\n\r]</regex></end>

                <import mode="Ruby" />
            </state>
        </default>
    </states>
</syntax>
